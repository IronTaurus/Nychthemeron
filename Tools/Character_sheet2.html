<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../csheet_style.css">
</head>

<body>
    <div class="Grid-container-top">
        <button id="Religion" class="top-button" onclick="window.location.href='/Religion.html';">Religion</button>
        <button id="History" class="top-button" onclick="window.location.href='/History.html';">History</button>
        <button id="Myths" class="top-button" onclick="window.location.href='/Myths.html';">Myths</button>
        <a id="Home" onclick="href='index.html';"><img src="/Art/Home.png" alt="/home" width="100" height="100"></a>
        <button id="Races" class="top-button" onclick="window.location.href='/Races.html';">Races</button>
        <button id="Cards" class="top-button" onclick="window.location.href='/Game.html';">Game</button>
        <button id="Rules" class="top-button" onclick="window.location.href='/Tools.html';">Tools</button>
    </div>


    <div class="cSheet">

        <div class="cBlock" id="cProfile">
            <img id="pArt" src="" width="150" height="200">
            <div class="pBlock">
                <div class="pElement">
                    <label for="pNameTxt" id="pTitleTxt">Name:</label><br>
                    <input type="text" class="pValueTxt" id="pNameTxt" name="pValueTxt" value="Elaine Galadria"><br>
                </div>
                <div class="pElement">
                    <label for="pRaceTxt" id="pTitleTxt">Class:</label><br>
                    <input type="text" class="pValueTxt" id="pRaceTxt" name="cValueTxt" value="Human"><br>
                </div>
                <div class="pElement">
                    <label for="pClassTxt" id="pTitleTxt">Class:</label><br>
                    <input type="text" class="pValueTxt" id="pClassTxt" name="cValueTxt"
                        value="Apprentice 3 / Swordfighter 2"><br>
                </div>
                <div class="pElement" id="pDescriptionTxt">
                    <label for="pDescriptionTxt" id="pTitleTxt">Description:</label><br>
                    <textarea class="pValueTxt" id="pDescriptionTxt" name="cValueTxt" rows="6"
                        cols="40">The sole daughter of Elanor Galadria, queen of Askmadael. Traveled down the Askmadael mines to forfill a prophecy speaking of a darkness that would threaten Askmadael and a light that would fight it.</textarea><br>
                </div>
            </div>
            <div class="pBlock" id="pEnd">
                <div class="pElement">
                    <div class="pTitleTxt">Race:</div>
                    <div class="pValueTxt">Human</div>
                </div>
                <div class="pElement">
                    <div class="pTitleTxt">Origin:</div>
                    <div class="pValueTxt">Avena</div>
                </div>
            </div>

            <p id="pBackground"></p>

        </div>
        <div class="cBlock" id="cMain">
            <div class="cCols" id="colStats">
                <div class="mStats">
                    <div class="mAbility" id="mAgility">
                        <div class="sValue">
                            <div class="cTitleTxt" id="sTitleTxt">Agility</div>
                            <div class="cValueTxt" id="sValueTxt">1</div>
                        </div>
                    </div>
                    <div class="mAbility" id="mBody">
                        <div class="sValue">
                            <div class="cTitleTxt" id="sTitleTxt">Body</div>
                            <div class="cValueTxt" id="sValueTxt">2</div>
                        </div>
                    </div>
                    <div class="mAbility" id="mMind">
                        <div class="sValue">
                            <div class="cTitleTxt" id="sTitleTxt">Mind</div>
                            <div class="cValueTxt" id="sValueTxt">3</div>
                        </div>

                    </div>
                    <div class="mAbility" id="mMystic">
                        <div class="sValue">
                            <div class="cTitleTxt" id="sTitleTxt">Mystic</div>
                            <div class="cValueTxt" id="sValueTxt">4</div>
                        </div>

                    </div>
                    <div class="mAbility" id="mPresence">
                        <div class="sValue">
                            <div class="cTitleTxt" id="sTitleTxt">Presence</div>
                            <div class="cValueTxt" id="sValueTxt">5</div>
                        </div>

                    </div>
                </div>


            </div>
        </div>
        <div class="cFeatures" id="cFeatures">
            <div class="clFeatures" id="clFeatures">
                <div class="fList">
                    <h4>Class features</h4>
                    <div class="cFeature" id="fAbility">
                        <div><input type="text" class="aTitleTxt" id="aTitleTxt" value="Moonlight armour"></div>
                        <div><textarea class="aDescTxt" id="aDescTxt" rows="6"
                                cols="40">During the night or when moon's blessing is active your temporary armour can block magical damage.</textarea>
                        </div>
                    </div>
                    <div class="cFeature" id="fAbility">
                        <div><input type="text" class="aTitleTxt" id="aTitleTxt" value="Skillful"></div>
                        <div><textarea class="aDescTxt" id="aDescTxt" rows="6"
                                cols="40">You gain an additional 5 feature points of any chosen attribute.</textarea>
                        </div>
                    </div>
                    <div onclick="newClFeature('class')">+</div>
                </div>

            </div>
            <div class="rFeatures" id="rFeatures">
                <div class="fList">
                    <h4>Racial features</h4>
                    <div class="rFeature" id="fAbility">
                        <div><input type="text" class="aTitleTxt" value="Well adapted"></div>
                        <div><textarea class="aDescTxt" rows="6"
                                cols="40">Gain 2 attribute points of your choice.</textarea>
                        </div>
                    </div>
                </div>
            </div>
            <div class="mEquippments">

            </div>
            <div id="button">
                <button class="Save" onclick="saveCharacter()">Save!</button>
            </div>
            <div id="button">
                <button class="Save" onclick="loadCharacter()">Load!</button>
            </div>
            <div>
                <p id="testText"> hejhej hej</p>
            </div>
        </div>
    </div>
    </div>



    </div>
    </div>
    <script>
        class Character {
            constructor(cName, cRace, cClass, cFeatures = [], rFeatures = [], cAttributes = [], cBackround, cArt, cNotes) {
                this.character_Name = cName;
                this.character_Race = cRace;
                this.character_Class = cClass;
                this.character_ClassFeatures = cFeatures;
                this.character_RaceFeatures = rFeatures;
                this.character_Attributes = cAttributes;
                this.character_Background = cBackround;
                this.character_Art = cArt;
                this.character_Notes = cNotes;
            }
        }
        class Character_Race {
            constructor(name, traits, behaviour, appearence, background) {
                this.race_Name = name;
                this.race_Traits = traits;
                this.race_Behaviour = behaviour;
                this.race_Appearence = appearence;
                this.race_Background = background;
            }
        }
        class Character_Class {
            constructor(type, subType, cards) {
                this.class_Type = type;
                this.class_SubType = subType;
                this.class_Cards = cards;
            }
        }
        class Character_Feature {
            constructor(name, desc) {
                this.featureName = name;
                this.featureDesc = desc;
            }
        }
        class Character_Attribute {
            constructor(aName, aValue) {
                this.featureName = aName;
                this.featureDesc = aValue;
            }
        }

        let myCharacter = new Character("Name", "Race", "Class", []);
        setCharacter(myCharacter);

        function setCharacter(myCharacter) {
            var txtName = document.getElementById("pNameTxt").value;
            var txtRace = document.getElementById("pRaceTxt").value;
            var txtClass = document.getElementById("pClassTxt").value;
            const rFeatures = [];
            const cFeatures = [];
            const cAttributes = [];

            const classFeatures = document.querySelectorAll(".cFeature");
            classFeatures.forEach(element => {
                const featureName = element.querySelector('#aTitleTxt').value;
                const featureDesc = element.querySelector('#aDescTxt').value;
                let newClassFeature = new Character_Feature(featureName, featureDesc);
                cFeatures.push(newClassFeature);
            });

            // const raceFeatures = document.querySelectorAll(".rFeature");
            // raceFeatures.forEach(element => {
            //     const featureName = element.querySelector('#aTitleTxt').value;
            //     const featureDesc = element.querySelector('#aDescTxt').value;
            //     let newClassFeature = new Character_Feature(featureName, featureDesc);
            //     rFeatures.push(newClassFeature);
            // });

            const characterAttributes = document.querySelectorAll(".sValue");
            characterAttributes.forEach(element => {
                const attributeName = element.querySelector('#sTitleTxt').value;
                const attributeValue = element.querySelector('#sValueTxt').value;
                let newAttribute = new Character_Attribute(attributeName, attributeValue);
                cAttributes.push(newAttribute);
            });

            myCharacter.character_Name = txtName;
            myCharacter.character_Race = txtRace;
            myCharacter.character_Class = txtClass;
            myCharacter.character_RaceFeatures = rFeatures;
            myCharacter.character_ClassFeatures = cFeatures;
            myCharacter.character_Attributes = cAttributes;

        }

        function saveCharacter() {
            setCharacter(myCharacter);
            document.getElementById("testText").textContent = myCharacter.character_Name;
            myCharacter.character_ClassFeatures.forEach(element => {
                document.getElementById("testText").textContent += element.featureName + " " + element.featureDesc;
            });
        }

        function loadCharacter() {
            var myNode = document.getElementById("clFeatures");
            myNode.removeChild(myNode.firstElementChild);
            var newNode = document.createElement("div");
            newNode.setAttribute("class", "fList");
            newNode.setAttribute("id", "fList_class");
            myNode.appendChild(newNode);
            const title = document.createElement("h4");
            newNode.appendChild(title);
            const titleTxt = document.createTextNode("Class Features");
            title.appendChild(titleTxt);


            myCharacter.character_ClassFeatures.forEach(element => {


                const newFeature = document.createElement("div");
                newFeature.setAttribute("id", "fAbility")
                newFeature.setAttribute("class", "cFeature")
                newNode.appendChild(newFeature);
                const featureTitle = document.createElement("input");
                featureTitle.setAttribute("type", "text");
                featureTitle.setAttribute("class", "aTitleTxt");
                featureTitle.setAttribute("id", "aTitleTxt");
                featureTitle.setAttribute("value", element.featureName);
                newFeature.appendChild(featureTitle);

                const featureDesc = document.createElement("textarea");
                featureDesc.setAttribute("class", "aDescTxt");
                featureDesc.setAttribute("id", "aDescTxt");
                featureDesc.setAttribute("rows", "6");
                featureDesc.setAttribute("cols", "40");
                newFeature.appendChild(featureDesc);
                const descText = document.createTextNode(element.featureDesc);
                featureDesc.appendChild(descText);
            });

            document.getElementById("pNameTxt").value = myCharacter.character_Name;
        }
        function newClFeature(type) {
            var newNode = document.getElementById("fList_" + type);
            const newFeature = document.createElement("div");
            newFeature.setAttribute("id", "newClassFeature");
            newNode.appendChild(newFeature);
            const featureTitle = document.createElement("input");
            featureTitle.setAttribute("type", "text");
            featureTitle.setAttribute("class", "aTitleTxt");
            featureTitle.setAttribute("id", "aTitleTxt");
            featureTitle.setAttribute("value", "Name...");
            document.getElementById(newFeature).appendChild(featureTitle);

            const featureDesc = document.createElement("textarea");
            featureDesc.setAttribute("class", "aDescTxt");
            featureDesc.setAttribute("id", descID);
            featureDesc.setAttribute("rows", "6");
            featureDesc.setAttribute("cols", "40");
            document.getElementById(featureName).appendChild(featureDesc);
            const descText = document.createTextNode("Text here...");
            document.getElementById(featureDesc).appendChild(descText);
        }

    </script>
    </script>
</body>

</html>